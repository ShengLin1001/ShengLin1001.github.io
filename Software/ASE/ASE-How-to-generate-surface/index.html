<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ASE - How to generate surface | Please be chilling out</title>
  <meta name="keywords" content=" Software-ASE ">
  <meta name="description" content="ASE - How to generate surface | Please be chilling out">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="About this WeBlog我是一名 2022 级在读研究生（力学 &#x2F; 机器学习）。本博客创建于 2024.3 ，为了整合记录读研以来所有的知识积累（知乎，哔哩哔哩，公众号，博客，网站，书籍）。 目前我对微观尺度下金属领域的相变机制&#x2F;位错演化很感兴趣。如果大家对我的研究领域感兴趣，欢迎发邮件给我，共同进步。😃 使用软件包括：Python，VASP，Lammps Python 包：ASE，m">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="https://shenglin1001.github.io/about/">
<meta property="og:site_name" content="Please be chilling out">
<meta property="og:description" content="About this WeBlog我是一名 2022 级在读研究生（力学 &#x2F; 机器学习）。本博客创建于 2024.3 ，为了整合记录读研以来所有的知识积累（知乎，哔哩哔哩，公众号，博客，网站，书籍）。 目前我对微观尺度下金属领域的相变机制&#x2F;位错演化很感兴趣。如果大家对我的研究领域感兴趣，欢迎发邮件给我，共同进步。😃 使用软件包括：Python，VASP，Lammps Python 包：ASE，m">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-03-30T01:20:39.000Z">
<meta property="article:modified_time" content="2024-06-21T02:16:33.835Z">
<meta property="article:author" content="Louis">
<meta property="article:tag" content="material science">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css" rel="stylesheet">
<link href="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 7.1.1"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="false" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>Louis</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/ShengLin1001"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="zhihu"
               href="https://www.zhihu.com/people/bas-58"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-zhihu"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="email"
               href="mailto:12324025@zju.edu.cn"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=1770861169&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="All">All
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="Thinking">
            <i class="fold iconfont icon-right"></i>
            Thinking
            
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="Thinking&lt;---&gt;Diary">
            
            Diary
            
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="Thinking&lt;---&gt;Idea">
            
            Idea
            
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="Summary">
            <i class="fold iconfont icon-right"></i>
            Summary
            
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="Summary&lt;---&gt;My_blog">
            
            My_blog
            
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="Summary&lt;---&gt;Other_people_blog">
            
            Other_people_blog
            
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="Software">
            <i class="fold iconfont icon-right"></i>
            Software
            
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="Software&lt;---&gt;VASP">
            <i class="fold iconfont icon-right"></i>
            VASP
            
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="Software&lt;---&gt;VASP&lt;---&gt;Special_functions">
            
            Special_functions
            
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="Software&lt;---&gt;VASP&lt;---&gt;VTheory">
            
            VTheory
            
        </div>
        
    </li>

                
            </ul>
        
    </li>

                
                    
    <li>
        <div data-rel="Software&lt;---&gt;ASE">
            
            ASE
            
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="Software&lt;---&gt;Lammps">
            
            Lammps
            
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="Software&lt;---&gt;P4VASP">
            
            P4VASP
            
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="Software&lt;---&gt;Pymatgen">
            
            Pymatgen
            
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="Software&lt;---&gt;Tool">
            
            Tool
            
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="Program">
            <i class="fold iconfont icon-right"></i>
            Program
            
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="Program&lt;---&gt;Python">
            
            Python
            
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="Developing">
            <i class="fold iconfont icon-right"></i>
            Developing
            
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="Developing&lt;---&gt;Install">
            
            Install
            
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="Developing&lt;---&gt;Mymetal">
            
            Mymetal
            
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="Theory">
            <i class="fold iconfont icon-right"></i>
            Theory
            
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="Theory&lt;---&gt;Quantum_mechanics">
            
            Quantum_mechanics
            
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="45">
<input type="hidden" id="yelog_site_word_count" value="37.5k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://blog.shishiruqi.com/">啦啦黑还黑</a></li>
            
            <li><a target="_blank" href="https://www.bigbrosci.com/">大师兄</a></li>
            
            <li><a target="_blank" href="http://sobereva.com/">卢天</a></li>
            
            <li><a target="_blank" href="http://staff.ustc.edu.cn/~zqj/">郑奇靖</a></li>
            
            <li><a target="_blank" href="https://www.zhihu.com/people/obaica/columns">学术之友</a></li>
            
            <li><a target="_blank" href="https://www.zhihu.com/column/c_1680331980414226432">我的专栏</a></li>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Developing-Install</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Developing-Mymetal</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Program-Python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Software-ASE</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Software-Lammps</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Software-P4VASP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Software-Pymatgen</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Software-Tool</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Software-VASP-Special_functions</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Software-VASP-VTheory</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Summary-My_blog</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Summary-Other_people_blog</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Theory-Quantum_mechanics</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Thinking-Diary</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Thinking-Idea</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a id="top" class="All Summary My_blog "
           href="/Summary/My-blog/My-blog-Literature-summary/"
           data-tag="Summary-My_blog"
           data-author="" >
            <span class="post-title" title="My blog - Literature summary">My blog - Literature summary</span>
            <span class="post-date" title="2024-09-10 21:55:00">2024/09/10</span>
        </a>
        
        
        <a id="top" class="All Summary My_blog "
           href="/Summary/My-blog/My-blog-Technology-summary/"
           data-tag="Summary-My_blog"
           data-author="" >
            <span class="post-title" title="My blog - Technology summary">My blog - Technology summary</span>
            <span class="post-date" title="2024-09-10 21:50:00">2024/09/10</span>
        </a>
        
        
        <a id="top" class="All Thinking Diary "
           href="/Thinking/Diary/Diary-Log/"
           data-tag="Thinking-Diary"
           data-author="" >
            <span class="post-title" title="Diary - Log">Diary - Log</span>
            <span class="post-date" title="2024-04-10 00:31:48">2024/04/10</span>
        </a>
        
        
        <a id="top" class="All Summary My_blog "
           href="/Summary/My-blog/My-blog-My-summary/"
           data-tag="Summary-My_blog"
           data-author="" >
            <span class="post-title" title="My blog - My summary">My blog - My summary</span>
            <span class="post-date" title="2024-03-30 17:46:59">2024/03/30</span>
        </a>
        
        
        <a id="top" class="All Software VASP VTheory "
           href="/Software/VASP/VTheory/VASP-VTheory-Classical-literatures/"
           data-tag="Software-VASP-VTheory"
           data-author="" >
            <span class="post-title" title="VASP - VTheory - Classical literatures">VASP - VTheory - Classical literatures</span>
            <span class="post-date" title="2024-03-30 16:00:07">2024/03/30</span>
        </a>
        
        
        <a id="top" class="All Software Tool "
           href="/Software/Tool/Tool-My-Summary/"
           data-tag="Software-Tool"
           data-author="" >
            <span class="post-title" title="Tool - Summary">Tool - Summary</span>
            <span class="post-date" title="2024-03-30 13:29:09">2024/03/30</span>
        </a>
        
        
        <a id="top" class="All Theory Quantum_mechanics "
           href="/Theory/Quantum-mechanics/Quantum-mechanics-some-website-and-book/"
           data-tag="Theory-Quantum_mechanics"
           data-author="" >
            <span class="post-title" title="Quantum mechanics - some websites and books">Quantum mechanics - some websites and books</span>
            <span class="post-date" title="2024-03-29 21:31:42">2024/03/29</span>
        </a>
        
        
        <a id="top" class="All Thinking Diary "
           href="/Thinking/Diary/Diary-I-want-to-do-now-keep-updating/"
           data-tag="Thinking-Diary,Thinking-Idea"
           data-author="" >
            <span class="post-title" title="Diary - I want to do now (keep updating)">Diary - I want to do now (keep updating)</span>
            <span class="post-date" title="2024-03-29 18:17:26">2024/03/29</span>
        </a>
        
        
        <a id="top" class="All Summary Other_people_blog "
           href="/Summary/Other-people-blog/Other-people-blog-computational-material-science/"
           data-tag="Summary-Other_people_blog"
           data-author="" >
            <span class="post-title" title="Other people blog - computational material science">Other people blog - computational material science</span>
            <span class="post-date" title="2024-03-29 18:16:05">2024/03/29</span>
        </a>
        
        
        <a id="top" class="All Thinking Diary "
           href="/Thinking/Diary/Diary-How-to-do-my-research/"
           data-tag="Thinking-Diary"
           data-author="" >
            <span class="post-title" title="Diary - How to do my research">Diary - How to do my research</span>
            <span class="post-date" title="2024-03-28 13:30:54">2024/03/28</span>
        </a>
        
        
        <a id="top" class="All Thinking Diary "
           href="/Thinking/Diary/Diary-Writing-at-first/"
           data-tag="Thinking-Diary"
           data-author="" >
            <span class="post-title" title="Diary - Writing at first">Diary - Writing at first</span>
            <span class="post-date" title="2024-03-25 22:00:04">2024/03/25</span>
        </a>
        
        
        <a id="top" class="All Summary My_blog "
           href="/Summary/My-blog/My-blog-Shortcut-command/"
           data-tag="Summary-My_blog"
           data-author="" >
            <span class="post-title" title="My blog - Shortcut command">My blog - Shortcut command</span>
            <span class="post-date" title="2024-01-23 01:33:00">2024/01/23</span>
        </a>
        
        
        <a  class="All Thinking Diary "
           href="/Thinking/Diary/Diary-2025/"
           data-tag="Thinking-Diary"
           data-author="" >
            <span class="post-title" title="Diary - 2025">Diary - 2025</span>
            <span class="post-date" title="2025-03-04 21:13:00">2025/03/04</span>
        </a>
        
        
        <a  class="All Summary Other_people_blog "
           href="/Summary/Other-people-blog/Other-people-blog-Metals/"
           data-tag="Summary-Other_people_blog"
           data-author="" >
            <span class="post-title" title="Other people blog - Metals">Other people blog - Metals</span>
            <span class="post-date" title="2024-12-18 09:58:00">2024/12/18</span>
        </a>
        
        
        <a  class="All Theory Quantum_mechanics "
           href="/Theory/Quantum-mechanics/Quantum-mechanics-Atomic-orbital/"
           data-tag="Theory-Quantum_mechanics"
           data-author="" >
            <span class="post-title" title="Quantum mechanics - Atomic orbital">Quantum mechanics - Atomic orbital</span>
            <span class="post-date" title="2024-11-21 14:55:00">2024/11/21</span>
        </a>
        
        
        <a  class="All Software Pymatgen "
           href="/Software/Pymatgen/Pymatgen-Calculation-parameters/"
           data-tag="Software-Pymatgen"
           data-author="" >
            <span class="post-title" title="Pymatgen - Calculation parameters">Pymatgen - Calculation parameters</span>
            <span class="post-date" title="2024-06-24 19:17:00">2024/06/24</span>
        </a>
        
        
        <a  class="All Developing Mymetal "
           href="/Developing/Mymetal/Mymetal-Lattice-mismatch/"
           data-tag="Developing-Mymetal"
           data-author="" >
            <span class="post-title" title="Mymetal - Lattice mismatch">Mymetal - Lattice mismatch</span>
            <span class="post-date" title="2024-06-08 15:30:00">2024/06/08</span>
        </a>
        
        
        <a  class="All Summary Other_people_blog "
           href="/Summary/Other-people-blog/Other-people-blog-Machine-learning/"
           data-tag="Summary-Other_people_blog"
           data-author="" >
            <span class="post-title" title="Other people blog - Machine learning">Other people blog - Machine learning</span>
            <span class="post-date" title="2024-04-29 13:00:00">2024/04/29</span>
        </a>
        
        
        <a  class="All Developing Install "
           href="/Developing/Install/Install-Software/"
           data-tag="Developing-Install"
           data-author="" >
            <span class="post-title" title="Install - Software">Install - Software</span>
            <span class="post-date" title="2024-04-23 10:22:00">2024/04/23</span>
        </a>
        
        
        <a  class="All Summary Other_people_blog "
           href="/Summary/Other-people-blog/Other-people-blog-Mechanics/"
           data-tag="Summary-Other_people_blog"
           data-author="" >
            <span class="post-title" title="Other people blog - Mechanics">Other people blog - Mechanics</span>
            <span class="post-date" title="2024-04-22 05:05:00">2024/04/22</span>
        </a>
        
        
        <a  class="All Thinking Diary "
           href="/Thinking/Diary/Diary-2024/"
           data-tag="Thinking-Diary"
           data-author="" >
            <span class="post-title" title="Diary - 2024">Diary - 2024</span>
            <span class="post-date" title="2024-04-22 04:52:00">2024/04/22</span>
        </a>
        
        
        <a  class="All Summary Other_people_blog "
           href="/Summary/Other-people-blog/Other-people-blog-on-the-way-of%20doctor/"
           data-tag="Summary-Other_people_blog"
           data-author="" >
            <span class="post-title" title="Other people blog - on the way of doctor">Other people blog - on the way of doctor</span>
            <span class="post-date" title="2024-04-20 04:26:00">2024/04/20</span>
        </a>
        
        
        <a  class="All Summary Other_people_blog "
           href="/Summary/Other-people-blog/Other-people-blog-DFT/"
           data-tag="Summary-Other_people_blog"
           data-author="" >
            <span class="post-title" title="Other people blog - DFT">Other people blog - DFT</span>
            <span class="post-date" title="2024-04-20 03:00:00">2024/04/20</span>
        </a>
        
        
        <a  class="All Thinking Idea "
           href="/Thinking/Idea/Idea-Next-paper/"
           data-tag="Thinking-Idea"
           data-author="" >
            <span class="post-title" title="Idea - Next paper">Idea - Next paper</span>
            <span class="post-date" title="2024-04-12 05:34:00">2024/04/12</span>
        </a>
        
        
        <a  class="All Software VASP VTheory "
           href="/Software/VASP/VTheory/VASP-VTheory-Space-group/"
           data-tag="Software-VASP-VTheory"
           data-author="" >
            <span class="post-title" title="VASP - VTheory - Space group">VASP - VTheory - Space group</span>
            <span class="post-date" title="2024-04-10 13:52:00">2024/04/10</span>
        </a>
        
        
        <a  class="All Software VASP VTheory "
           href="/Software/VASP/VTheory/VASP-VTheory-Influence-of-cell/"
           data-tag="Software-VASP-VTheory"
           data-author="" >
            <span class="post-title" title="VASP - VTheory - Influence of cell">VASP - VTheory - Influence of cell</span>
            <span class="post-date" title="2024-04-10 01:19:00">2024/04/10</span>
        </a>
        
        
        <a  class="All Software Tool "
           href="/Software/Tool/Tool-Find-heterostructure/"
           data-tag="Software-Tool"
           data-author="" >
            <span class="post-title" title="Tool - Find heterostructure">Tool - Find heterostructure</span>
            <span class="post-date" title="2024-04-07 00:36:38">2024/04/07</span>
        </a>
        
        
        <a  class="All Theory Quantum_mechanics "
           href="/Theory/Quantum-mechanics/Quantum-mechanics-Density-functional-theory/"
           data-tag="Theory-Quantum_mechanics"
           data-author="" >
            <span class="post-title" title="Quantum mechanics - Density functional theory">Quantum mechanics - Density functional theory</span>
            <span class="post-date" title="2024-04-01 15:16:03">2024/04/01</span>
        </a>
        
        
        <a  class="All Theory Quantum_mechanics "
           href="/Theory/Quantum-mechanics/Quantum-mechanics-The-Feynman-lectures-on-physics-1/"
           data-tag="Theory-Quantum_mechanics"
           data-author="" >
            <span class="post-title" title="Quantum mechanics - The Feynman lectures on physics 1">Quantum mechanics - The Feynman lectures on physics 1</span>
            <span class="post-date" title="2024-04-01 14:43:03">2024/04/01</span>
        </a>
        
        
        <a  class="All Developing Mymetal "
           href="/Developing/Mymetal/Mymetal-error/"
           data-tag="Developing-Mymetal"
           data-author="" >
            <span class="post-title" title="Mymetal - error">Mymetal - error</span>
            <span class="post-date" title="2024-03-30 01:44:55">2024/03/30</span>
        </a>
        
        
        <a  class="All Developing Mymetal "
           href="/Developing/Mymetal/Mymetal-log/"
           data-tag="Developing-Mymetal"
           data-author="" >
            <span class="post-title" title="Mymetal - work log">Mymetal - work log</span>
            <span class="post-date" title="2024-03-30 01:44:55">2024/03/30</span>
        </a>
        
        
        <a  class="All Software P4VASP "
           href="/Software/P4VASP/P4VASP-install/"
           data-tag="Software-P4VASP"
           data-author="" >
            <span class="post-title" title="P4VASP - Install">P4VASP - Install</span>
            <span class="post-date" title="2024-03-25 14:33:00">2024/03/25</span>
        </a>
        
        
        <a  class="All Software VASP Special_functions "
           href="/Software/VASP/Special-functions/VASP-Special-functions-fix-basic-vector/"
           data-tag="Software-VASP-Special_functions"
           data-author="" >
            <span class="post-title" title="VASP - Special functions - fix basic vector">VASP - Special functions - fix basic vector</span>
            <span class="post-date" title="2024-01-24 18:57:00">2024/01/24</span>
        </a>
        
        
        <a  class="All Software Tool "
           href="/Software/Tool/Tool-Proxy-problem-of-copilot/"
           data-tag="Software-Tool"
           data-author="" >
            <span class="post-title" title="Tool - Proxy problem of copilot">Tool - Proxy problem of copilot</span>
            <span class="post-date" title="2024-01-23 02:54:00">2024/01/23</span>
        </a>
        
        
        <a  class="All Software ASE "
           href="/Software/ASE/ASE-How-to-generate-surface/"
           data-tag="Software-ASE"
           data-author="" >
            <span class="post-title" title="ASE - How to generate surface">ASE - How to generate surface</span>
            <span class="post-date" title="2024-01-19 12:13:00">2024/01/19</span>
        </a>
        
        
        <a  class="All Software ASE "
           href="/Software/ASE/ASE-Modify-the-source-code-of-Write-function/"
           data-tag="Software-ASE"
           data-author="" >
            <span class="post-title" title="ASE - Modify the source code of Write function">ASE - Modify the source code of Write function</span>
            <span class="post-date" title="2024-01-18 07:01:00">2024/01/18</span>
        </a>
        
        
        <a  class="All Thinking Diary "
           href="/Thinking/Diary/Diary-Past-and-future/"
           data-tag="Thinking-Diary"
           data-author="" >
            <span class="post-title" title="Diary - Past and future">Diary - Past and future</span>
            <span class="post-date" title="2023-12-29 05:08:00">2023/12/29</span>
        </a>
        
        
        <a  class="All Software ASE "
           href="/Software/ASE/ASE-generate-POSCAR/"
           data-tag="Software-ASE"
           data-author="" >
            <span class="post-title" title="ASE - generate POSCAR">ASE - generate POSCAR</span>
            <span class="post-date" title="2023-12-14 23:51:00">2023/12/14</span>
        </a>
        
        
        <a  class="All Program Python "
           href="/Program/Python/Python-DFT-calculation-3-Generate-Kpoints/"
           data-tag="Program-Python"
           data-author="" >
            <span class="post-title" title="Python - DFT calculation 3 - Generate Kpoints">Python - DFT calculation 3 - Generate Kpoints</span>
            <span class="post-date" title="2023-11-23 17:28:00">2023/11/23</span>
        </a>
        
        
        <a  class="All Program Python "
           href="/Program/Python/Python-DFT-calculation-2-Introduction-of-Kspace/"
           data-tag="Program-Python"
           data-author="" >
            <span class="post-title" title="Python - DFT calculation 2 - Introduction of Kspace">Python - DFT calculation 2 - Introduction of Kspace</span>
            <span class="post-date" title="2023-11-21 23:26:00">2023/11/21</span>
        </a>
        
        
        <a  class="All Program Python "
           href="/Program/Python/Python-DFT-calculation-1-Solve-the-one-dimensional-Schrodinger-equation/"
           data-tag="Program-Python"
           data-author="" >
            <span class="post-title" title="Python - DFT calculation 1 - Solve the one dimensional Schrodinger equation">Python - DFT calculation 1 - Solve the one dimensional Schrodinger equation</span>
            <span class="post-date" title="2023-08-30 16:36:00">2023/08/30</span>
        </a>
        
        
        <a  class="All Software Lammps "
           href="/Software/Lammps/Lammps-Reinstall/"
           data-tag="Software-Lammps"
           data-author="" >
            <span class="post-title" title="Lammps - Reinstall">Lammps - Reinstall</span>
            <span class="post-date" title="2022-11-25 11:56:00">2022/11/25</span>
        </a>
        
        
        <a  class="All Software Lammps "
           href="/Software/Lammps/Lammps-SW-mod-potential-of-MoS2/"
           data-tag="Software-Lammps"
           data-author="" >
            <span class="post-title" title="Lammps - SW mod potential of MoS2">Lammps - SW mod potential of MoS2</span>
            <span class="post-date" title="2022-04-19 17:46:00">2022/04/19</span>
        </a>
        
        
        <a  class="All Software Lammps "
           href="/Software/Lammps/Lammps-Add-new-pair-style/"
           data-tag="Software-Lammps"
           data-author="" >
            <span class="post-title" title="Lammps - Add new pair style">Lammps - Add new pair style</span>
            <span class="post-date" title="2022-04-16 19:20:00">2022/04/16</span>
        </a>
        
        
        <a  class="All Software Lammps "
           href="/Software/Lammps/Lammps-RDF-of-annealed-SiO2-using-VMD/"
           data-tag="Software-Lammps"
           data-author="" >
            <span class="post-title" title="Lammps - RDF of annealed SiO2 using VMD">Lammps - RDF of annealed SiO2 using VMD</span>
            <span class="post-date" title="2022-04-05 20:09:00">2022/04/05</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Software/ASE-How-to-generate-surface" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">ASE - How to generate surface</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Software">Software</a> > 
            
            <a  data-rel="Software&lt;---&gt;ASE">ASE</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color3">Software-ASE</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2024-06-21 05:03:46'>2024-01-19 12:13</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:1.5k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views 👀 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ref"><span class="toc-text">Ref</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D"><span class="toc-text">写在前面的话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ASE-%E4%B8%AD%E7%9A%84-surface"><span class="toc-text">1. ASE 中的 surface</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BE%8B%E5%AD%90-%EF%BC%88Ref-1-%EF%BC%89"><span class="toc-text">2. 一个简单的例子 （Ref [1]）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-manual-%E4%B8%AD%E7%9A%84-%E7%90%86%E8%AE%BA-ref-3"><span class="toc-text">3. manual 中的 理论 [ref 3]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%AE%9E%E7%A9%BA%E9%97%B4%E6%8F%8F%E8%BF%B0"><span class="toc-text">3.1 实空间描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%80%92%E7%A9%BA%E9%97%B4%E6%8F%8F%E8%BF%B0"><span class="toc-text">3.2 倒空间描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E7%A1%AE%E5%AE%9A%E9%9D%A2%E5%86%85%E5%9F%BA%E7%9F%A2%E9%87%8F"><span class="toc-text">3.3 确定面内基矢量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E7%A1%AE%E5%AE%9A-v3"><span class="toc-text">3.4 确定 v3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.5 代码中的实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Spglib-%E5%AF%BB%E6%89%BE%E5%8E%9F%E8%83%9E-ref-2"><span class="toc-text">4 Spglib 寻找原胞 (ref 2)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%AE%BE%E5%AE%9A%E5%AF%86%E6%8E%92%E9%9D%A2%E5%B1%82%E6%95%B0"><span class="toc-text">5. 设定密排面层数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E%E7%9A%84%E8%AF%9D"><span class="toc-text">写在最后的话</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-5 i,
    .toc-level-5 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p align="center"><strong><em>No cross, no crown.<em></strong></p>

<p align="center"><strong><em>不经历风雨，怎么见彩虹<em></strong></p>

<p><strong>Updated time: 01/19 2024.</strong></p>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><ol>
<li><p><a href="https://link.zhihu.com/?target=https%3A//wiki.fysik.dtu.dk/ase/ase/build/surface.html%23surfaces">Surfaces — ASE documentation (dtu.dk)</a></p>
</li>
<li><p><a href="https://link.zhihu.com/?target=https%3A//spglib.readthedocs.io/en/latest/definition.html">Definitions and conventions — Spglib v2.3.0</a></p>
</li>
<li><p>Theory and implementation behind: Universal surface creation - smallest unitcell Bjarke Brink Buus, Jakob Howalt &amp; Thomas Bligaard August 2, 2019</p>
</li>
<li><p><a href="https://link.zhihu.com/?target=http%3A//bbs.vaspkit.cn/forum.php%3Fmod%3Dviewthread%26tid%3D54%23%3A~%3Atext%3DVASPKIT%E9%A6%96%E5%85%88%E8%B0%83%E7%94%A8spglib%E5%AF%BB%E6%89%BE%E5%88%B0%E6%A0%87%E5%87%86%E7%9A%84%E6%83%AF%E7%94%A8%E6%99%B6%E8%83%9E%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9F%BA%E4%BA%8E%E6%96%87%E7%8C%AEComputational%20Materials%20Science%20128%20%282017%29%20140%E2%80%93184%E4%B8%AD%E7%9A%84%E8%A1%A83%E6%89%80%E7%BB%99%E5%87%BA%E7%9A%84%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5P%EF%BC%8C%E9%80%9A%E8%BF%87%E5%85%AC%E5%BC%8F%E5%8E%9F%E8%83%9E%E5%9F%BA%E7%9F%A2%20%28ap%2C%2Cbp%2C%20cp%29%3D%E6%99%B6%E8%83%9E%E5%9F%BA%E7%9F%A2%20%28ac%2C%20bc%2C%20cc%29%2AP%E5%BE%97%E5%88%B0%E5%8E%9F%E8%83%9E%EF%BC%88%E5%8F%82%E8%80%83%20https%3A%2F%2Fspglib.github.io%2Fspglib%2Fdefinition.html%20%EF%BC%89%E3%80%82">vaspkit得到标准化原胞基矢和pymatgen得到标准化原胞基矢差异 - VASPKIT使用相关 - VASPKIT论坛 - VASPKIT</a></p>
</li>
</ol>
<h2 id="写在前面的话"><a href="#写在前面的话" class="headerlink" title="写在前面的话"></a>写在前面的话</h2><p>我复现的是关于薄膜的单轴，双轴拉伸。本来想基于 ASE 的 Atoms 创建一个子类 Films，但是我不太能理清其中的继承关系，做到一半发现有部分函数调用失败，于是还是归为 Atoms 类。</p>
<h2 id="1-ASE-中的-surface"><a href="#1-ASE-中的-surface" class="headerlink" title="1. ASE 中的 surface"></a>1. ASE 中的 surface</h2><p>参考 [1]，ASE 中的 surface 包括 common surface 和 non-common surface。为了使得理解的更为透彻，也方便后面的修改，这里我主要了解的是 non-common surface 的理论介绍和源代码。</p>
<p><img src="/images/ASE-How-to-generate-surface/1.png" alt="ase.build.surface"></p>
<p>对于参数的理解有，<strong>lattice 不能是原胞，必须是 conventional cell</strong>; indices 的单位是 (a<sub>1</sub>, a<sub>2</sub>, a<sub>3</sub>), 而不是 (x,y,z); periodic 只决定 z 方向， xy 自动设为 True; layers 是指 layer of slab。<strong>在我的修改中，我想指定金属密排面的层数，以及生成的 film 是原胞</strong>。</p>
<h2 id="2-一个简单的例子-（Ref-1-）"><a href="#2-一个简单的例子-（Ref-1-）" class="headerlink" title="2. 一个简单的例子 （Ref [1]）"></a>2. 一个简单的例子 （Ref [1]）</h2><p>可以看到这个方法的强大之处在于，我们可以任意指定一个 conventional cell，就可以创建出任意晶向的切面。</p>
<p>从这个例子可以得到：</p>
<pre><code class="lang-python3">s3.center(vacuum=10, axis=2)
</code></pre>
<p>设定的真空层厚度是可多次变化的，不会累积。</p>
<p>以及源代码中应该考虑到 surface 必然是要加真空层的，所以如果 <code>vacuum = 0</code>, 那么可以看到上下表面的原子紧挨着上下边界。如果 replicate z, 就会发现原子重叠了。</p>
<pre><code class="lang-python3">a = 4.0
Pt3Rh = Atoms(&#39;Pt3Rh&#39;,
              scaled_positions=[(0, 0, 0),
                                (0.5, 0.5, 0),
                                (0.5, 0, 0.5),
                                (0, 0.5, 0.5)],
              cell=[a, a, a],
              pbc=True)
s3 = surface(Pt3Rh, (2, 1, 1), 9)
s3.center(vacuum=10, axis=2)

Pt3Rh.set_chemical_symbols(&#39;PtRhPt2&#39;)
s4 = surface(Pt3Rh, (2, 1, 1), 9)
s4.center(vacuum=10, axis=2)
</code></pre>
<p><img src="/images/ASE-How-to-generate-surface/2.png" alt="s3, s4"></p>
<h2 id="3-manual-中的-理论-ref-3"><a href="#3-manual-中的-理论-ref-3" class="headerlink" title="3. manual 中的 理论 [ref 3]"></a>3. manual 中的 理论 [ref 3]</h2><h3 id="3-1-实空间描述"><a href="#3-1-实空间描述" class="headerlink" title="3.1 实空间描述"></a>3.1 实空间描述</h3><p>晶面指数 (h k l)，与 （a<sub>1</sub>, a<sub>2</sub>, a<sub>3</sub>）轴交叉于 (1/h·a<sub>1</sub>, 1/k·a<sub>2</sub>, 1/l·a<sub>3</sub>)</p>
<h3 id="3-2-倒空间描述"><a href="#3-2-倒空间描述" class="headerlink" title="3.2 倒空间描述"></a>3.2 倒空间描述</h3><p>晶面法向量 n = h·b<sub>1</sub> + k·b<sub>2</sub> + l·b<sub>3</sub></p>
<p><img src="/images/ASE-How-to-generate-surface/3.png" alt="面内基矢量的表示"></p>
<h3 id="3-3-确定面内基矢量"><a href="#3-3-确定面内基矢量" class="headerlink" title="3.3 确定面内基矢量"></a>3.3 确定面内基矢量</h3><p>两个基矢量的叉乘应最小，基于此去求解</p>
<p><img src="/images/ASE-How-to-generate-surface/4.png" alt=""></p>
<p><img src="/images/ASE-How-to-generate-surface/5.png" alt=""></p>
<h3 id="3-4-确定-v3"><a href="#3-4-确定-v3" class="headerlink" title="3.4 确定 v3"></a>3.4 确定 v<sub>3</sub></h3><p><img src="/images/ASE-How-to-generate-surface/6.png" alt=""></p>
<h3 id="3-5-代码中的实现"><a href="#3-5-代码中的实现" class="headerlink" title="3.5 代码中的实现"></a>3.5 代码中的实现</h3><p><img src="/images/ASE-How-to-generate-surface/7.png" alt=""></p>
<p><img src="/images/ASE-How-to-generate-surface/8.png" alt=""></p>
<h2 id="4-Spglib-寻找原胞-ref-2"><a href="#4-Spglib-寻找原胞-ref-2" class="headerlink" title="4 Spglib 寻找原胞 (ref 2)"></a>4 Spglib 寻找原胞 (ref 2)</h2><p>ref [2] 中有关于寻找原胞的逻辑，先寻找对称性，然后进行转换/旋转操作。</p>
<pre><code class="lang-text">import spglib

lattice = [[5.0759761474456697, 5.0759761474456697, 0],
           [-2.8280307701821314, 2.8280307701821314, 0],
           [0, 0, 8.57154746]]
points = [[0.0, 0.84688439, 0.1203133],
          [0.0, 0.65311561, 0.6203133],
          [0.0, 0.34688439, 0.3796867],
          [0.0, 0.15311561, 0.8796867],
          [0.5, 0.34688439, 0.1203133],
          [0.5, 0.15311561, 0.6203133],
          [0.5, 0.84688439, 0.3796867],
          [0.5, 0.65311561, 0.8796867]]
numbers = [8,] * len(points)
cell = (lattice, points, numbers)
primitive_cell = spglib.standardize_cell(cell, to_primitive=1, no_idealize=1)
print(primitive_cell[0])
</code></pre>
<p><strong>However using<code>standardize_cell</code>, distortion is not removed for the distorted crystal structure.</strong></p>
<p><strong>由此可见，需要从 Atom 中按照格式输入到函数中。</strong></p>
<pre><code class="lang-text">import spglib
# find primitive cell using spglib
def my_find_prim(atoms: Atoms = None) -&gt; Atoms:
    # Convert to a format suitable for spglib
    lattice = array(atoms.get_cell())
    points = array(atoms.get_scaled_positions())
    numbers = array(atoms.get_atomic_numbers())
    pbc = array(atoms.get_pbc())
    cell = (lattice, points, numbers)

    primitive_cell = spglib.standardize_cell(cell, to_primitive=1, no_idealize=1)

    # print(primitive_cell)
    # primitive_symbols = [chemical_symbols[number] for number in primitive_cell[2]]

    # Convert the spglib output back to an ASE Atoms object
    primitive_atoms = Atoms(numbers = primitive_cell[2],
                            scaled_positions = primitive_cell[1],
                            cell = primitive_cell[0],
                            pbc=pbc)
    return primitive_atoms
</code></pre>
<h2 id="5-设定密排面层数"><a href="#5-设定密排面层数" class="headerlink" title="5. 设定密排面层数"></a>5. 设定密排面层数</h2><p>我的想法是我先生成 <code>1 layer_slab</code>，通过寻找原胞得到这一层slab中有多少原子 <code>num_per_slab</code>，然后除以（预先设定的）一层密排面中有多少高度不一致的原子 <code>number_per_layer</code>（例如 <code>FCC，HCP</code> 都为1，二硫化钼为3），得到该创建几层<code>slab，num_rep_z</code></p>
<pre><code class="lang-python3"># find number of atoms per slab
def my_find_num_per_slab(my_bulk: Atoms = None,
                         slice_plane:  tuple[int] = (0, 0, 1),
                         my_tol: float = 1e-6,          
                         my_periodic: bool = False,
                         number_per_layer: float = None) -&gt; float:
    my_one_slab = surface(my_bulk, slice_plane , 1, vacuum = 20, tol=my_tol, periodic=my_periodic)
    prim_one_slab = my_find_prim(my_one_slab)
    atom_number_per_slab = len(prim_one_slab.get_positions())
    layer_number_per_slab = atom_number_per_slab/number_per_layer
    return layer_number_per_slab
</code></pre>
<p>主函数</p>
<pre><code class="lang-python3">from numpy import sqrt, ndarray, array, int32
from os    import makedirs, path
from inspect import stack
from ase.cell import Cell
from ase.symbols import Symbols
import numpy as np

from ase import Atoms
from ase.data import chemical_symbols
from ase.build import bulk, surface
from ase.io import write
from ase.visualize import view
from ase.io.vasp import _symbol_count_from_symbols, _write_symbol_count
from ase.utils import reader, writer

import re
from pathlib import Path
from typing import List, Optional, TextIO, Tuple
import spglib

def generate_film(   symbols: str = None,                 # str
                structure: str = None,              # str
                num_layers: int = None,            # int
                replic_z: int = None,              # int
                my_vacuum: float = None,           # float
                slice_plane: tuple[int] = (0, 0, 1),  # Tuple of ints
                my_tol: float = 1e-6,              # float
                my_periodic: bool = False,          # bool
                a_fcc: float = 2.95*sqrt(2.0),     # float
                a_hcp: float = 2.95,               # float
                my_covera: float = sqrt(8.0/3.0),  # float
                move_atom: list = [0.1, 0.1, 0.0],
                number_per_layer: float = 1.0
                ) :
    # parameters : 1-8 line: general setting
    #              9 10-11 line: fcc, hcp parameters
    # when we use surface() function, my_bulk must be a conventional cell, not a primitive cell, so set cubic=True

    if structure == &#39;fcc&#39;:
        my_bulk = bulk(symbols, structure, a=a_fcc, cubic=True)
    elif structure == &#39;hcp&#39;:
        my_bulk = bulk(symbols, structure, a = a_hcp, covera = my_covera, cubic=True)
    else:
        raise ValueError(&#39;%s is an invalid structure&#39; % structure)

    layer_number_per_slab = my_find_num_per_slab(my_bulk, slice_plane, my_tol, my_periodic, number_per_layer)
    # print(&#39;layer_number_per_slab: %s&#39; % layer_number_per_slab)

    if num_layers:
        num_rep_z = int(num_layers/layer_number_per_slab)
    elif replic_z:
        num_rep_z = replic_z
    else:
        raise ValueError(&#39;%s or %s is an invalid value&#39; % num_layers % num_rep_z)

    # print(&#39;rep_z: %s&#39; %num_rep_z)
    my_slab = surface(my_bulk, slice_plane , num_rep_z, vacuum = my_vacuum, tol=my_tol, periodic=my_periodic)
    my_slab = my_find_prim(my_slab)

    move_atoms(my_slab, move_atom)
    my_slab.wrap()
    return my_slab


# move atoms
def move_atoms(atoms: Atoms = None,
               translate_matrix: ndarray = array([0.1, 0.1, 0.0])) -&gt; Atoms :
    scaled = atoms.get_scaled_positions()
    scaled += translate_matrix
    atoms.set_scaled_positions(scaled)
    atoms.wrap()
    return atoms

# find primitive cell using spglib
def my_find_prim(atoms: Atoms = None) -&gt; Atoms:
# Convert to a format suitable for spglib
lattice = array(atoms.get_cell())
points = array(atoms.get_scaled_positions())
numbers = array(atoms.get_atomic_numbers())
pbc = array(atoms.get_pbc())
cell = (lattice, points, numbers)

primitive_cell = spglib.standardize_cell(cell, to_primitive=1, no_idealize=1)
# Convert the spglib output back to an ASE Atoms object
primitive_atoms = Atoms(numbers = primitive_cell[2],
scaled_positions = primitive_cell[1],
cell = primitive_cell[0],
pbc=pbc)
return primitive_atoms
</code></pre>
<p>至此，我想要的功能都实现了。</p>
<h2 id="写在最后的话"><a href="#写在最后的话" class="headerlink" title="写在最后的话"></a>写在最后的话</h2><p><strong>未解决的问题</strong></p>
<ol>
<li>我其实搞不懂这个surface函数究竟是怎么转出来的，当我没有添加得到原胞的功能时，FCC {111} 1 层slab里有一层密排面，4个原子。FCC {100} 1 层slab里有两层原子面，4个原子。</li>
</ol>
<pre><code class="lang-python3">film = generate_film(symbols = &#39;Au&#39;, structure = &#39;fcc&#39;, num_layers = 1, my_vacuum = 20, slice_plane = (1 0 0) or (1,1,1), a_fcc = 2.95*sqrt(2.0))
</code></pre>
<p>正是因为没搞懂，所以为了实现设定原子密排面数量，我采用了上述转换。</p>

      
       <hr><span style="font-style: italic;color: gray;"> Please indicate the source when reprinting. Please verify the citation sources in the article and point out any errors or unclear expressions. </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2022-2024 Louis
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'photoSwipe';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        

        // PhotoSwipe
        $('article').each(function(i){
            $(this).find('img').each(function(){
                if ($(this).closest('figure').hasClass('article-gallery-img')) {
                    return;
                }
                var alt = this.alt;
                $(this)
                    .wrap('<figure class="article-gallery-img" itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject"></figure>')
                    .wrap('<a href="' + this.src + '" title="' + alt + '"></a>');
                $(this).after('<div class="img_alt"><span>' + (alt || '') + '</span></div>');
            });
        });

        var pswpElement = document.querySelectorAll('.pswp')[0];
        if (pswpElement) {
            var gallerySelector = '.article-gallery, article';

            var initPhotoSwipeFromDOM = function(gallerySelector) {

                // parse slide data (url, title, size ...) from DOM elements
                // (children of gallerySelector)
                var parseThumbnailElements = function(el) {
                    var thumbElements = $(el).find('figure.article-gallery-img').toArray(),
                        numNodes = thumbElements.length,
                        items = [],
                        figureEl,
                        linkEl,
                        size,
                        imgEl,
                        item;

                    for (var i = 0; i < numNodes; i++) {

                        figureEl = thumbElements[i]; // <figure> element

                        // include only element nodes
                        if (figureEl.nodeType !== 1) {
                            continue;
                        }

                        linkEl = figureEl.children[0]; // <a> element
                        imgEl = linkEl.children[0]; // <img>

                        size = linkEl.getAttribute('data-size');
                        size = size && size.split('x');

                        // create slide object
                        item = {
                            src: linkEl.getAttribute('href'),
                            w: size && parseInt(size[0], 10) || imgEl.width,
                            h: size && parseInt(size[1], 10) || imgEl.height
                        };

                        if (figureEl.children.length > 1) {
                            // <figcaption> content
                            item.title = figureEl.children[1].innerHTML;
                        }

                        if (linkEl.children.length > 0) {
                            // <img> thumbnail element, retrieving thumbnail url
                            item.msrc = linkEl.children[0].getAttribute('src');
                        }

                        item.el = figureEl; // save link to element for getThumbBoundsFn
                        items.push(item);
                    }

                    return items;
                };

                // find nearest parent element
                var closest = function closest(el, fn) {
                    return el && (fn(el) ? el : closest(el.parentNode, fn));
                };

                // triggers when user clicks on thumbnail
                var onThumbnailsClick = function(e) {
                    e = e || window.event;

                    var eTarget = e.target || e.srcElement;

                    // find root element of slide
                    var clickedListItem = closest(eTarget, function(el) {
                        return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                    });

                    if (!clickedListItem) {
                        return;
                    }

                    if (e.preventDefault) {
                        e.preventDefault();
                    } else {
                        e.returnValue = false;
                    }

                    // find index of clicked item by looping through all child nodes
                    // alternatively, you may define index via data- attribute
                    var clickedGallery = $(clickedListItem).closest(gallerySelector)[0],
                        childNodes = $(clickedGallery).find('figure.article-gallery-img').toArray(),
                        numChildNodes = childNodes.length,
                        nodeIndex = 0,
                        index;

                    for (var i = 0; i < numChildNodes; i++) {
                        if (childNodes[i].nodeType !== 1) {
                            continue;
                        }

                        if (childNodes[i] === clickedListItem) {
                            index = nodeIndex;
                            break;
                        }
                        nodeIndex++;
                    }



                    if (index >= 0) {
                        // open PhotoSwipe if valid index found
                        openPhotoSwipe(index, clickedGallery);
                    }
                    return false;
                };

                // parse picture index and gallery index from URL (#&pid=1&gid=2)
                var photoswipeParseHash = function() {
                    var hash = window.location.hash.substring(1),
                        params = {};

                    if (hash.length < 5) {
                        return params;
                    }

                    var vars = hash.split('&');
                    for (var i = 0; i < vars.length; i++) {
                        if (!vars[i]) {
                            continue;
                        }
                        var pair = vars[i].split('=');
                        if (pair.length < 2) {
                            continue;
                        }
                        params[pair[0]] = pair[1];
                    }

                    if (params.gid) {
                        params.gid = parseInt(params.gid, 10);
                    }

                    return params;
                };

                var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                    var pswpElement = document.querySelectorAll('.pswp')[0],
                        gallery,
                        options,
                        items;

                    items = parseThumbnailElements(galleryElement);

                    // define options (if needed)
                    options = {

                        // define gallery index (for URL)
                        galleryUID: galleryElement.getAttribute('data-pswp-uid'),

                        getThumbBoundsFn: function(index) {
                            // See Options -> getThumbBoundsFn section of documentation for more info
                            var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                                rect = thumbnail.getBoundingClientRect();

                            return {
                                x: rect.left,
                                y: rect.top + pageYScroll,
                                w: rect.width
                            };
                        }
                    };

                    // PhotoSwipe opened from URL
                    if (fromURL) {
                        if (options.galleryPIDs) {
                            // parse real index when custom PIDs are used
                            // http://photoswipe.com/documentation/faq.html#custom-pid-in-url
                            for (var j = 0; j < items.length; j++) {
                                if (items[j].pid == index) {
                                    options.index = j;
                                    break;
                                }
                            }
                        } else {
                            // in URL indexes start from 1
                            options.index = parseInt(index, 10) - 1;
                        }
                    } else {
                        options.index = parseInt(index, 10);
                    }

                    // exit if index not found
                    if (isNaN(options.index)) {
                        return;
                    }

                    if (disableAnimation) {
                        options.showAnimationDuration = 0;
                    }

                    // Pass data to PhotoSwipe and initialize it
                    gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);

                    gallery.listen('imageLoadComplete', function(index, item) {
                        var linkEl = item.el.children[0];
                        var img = item.container.children[0];
                        if (!linkEl.getAttribute('data-size')) {
                            linkEl.setAttribute('data-size', img.naturalWidth + 'x' + img.naturalHeight);
                            item.w = img.naturalWidth;
                            item.h = img.naturalHeight;
                            gallery.invalidateCurrItems();
                            gallery.updateSize(true);
                        }
                    });

                    gallery.init();
                };

                // loop through all gallery elements and bind events
                var galleryElements = document.querySelectorAll(gallerySelector);

                for (var i = 0, l = galleryElements.length; i < l; i++) {
                    galleryElements[i].setAttribute('data-pswp-uid', i + 1);
                    galleryElements[i].onclick = onThumbnailsClick;
                }

                // Parse URL and open gallery if it contains #&pid=3&gid=1
                var hashData = photoswipeParseHash();
                if (hashData.pid && hashData.gid) {
                    openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);
                }
            };

            // execute above function
            initPhotoSwipeFromDOM(gallerySelector);
        }
        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 18px 3px 15px 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("/img/gj2.jpg");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
    #post .pjax article :not(pre) > code {
        color: #24292e;
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: .2em .4em;
    }
    
</style>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element, as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. -->
        <!-- don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>






</html>
